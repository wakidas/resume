# 建設・土木の生産支援クラウドプラットフォーム『Photoruction』の開発

## 業務内容① 品質課題解決のための開発チームマネジメント

喫緊の最重要課題である品質課題（不具合が多い）解決のため、不具合解消を担う CRE チーム（4 名）および不具合発生抑制を担う新規開発チーム（7 名）のマネジメントを行う。一部オフショアへ開発委託しており、オフショアのマネジメントも行う。

### 代表的な取り組み

#### 取り組み概要（What）

「Backlog の不具合チケット残数を減らす」こと

#### 取り組みの背景（Why）

これまでの開発は、「どんどん作ろう！」というスタンスで新機能開発にエンジニアリソースのほとんどを投下し、不具合の改修は必要最低限に止めていた。

しかし、顧客からのクレームがだんだんと増えてきて、それが原因で大口顧客がチャーンの危機に陥ることもあった。

そのような背景から私が入社したタイミングで CRE チームが発足し、新機能開発と不具合改修のリソース分離し、不具合解消は専門チームでチームで行うことにした。

それでもなお、私の入社当時の残不具合チケット数は 200 ほどあり、「ユーザーに自信を持ってお届けできる」サービスではない状態であったので、予算をかけて短期決戦で不具合チケットを減らすことになった。

#### 具体的な取り組み内容

社長含めた関係者と「年度内に不具合チケットをゼロにする」という計画を立案し、依頼実績のあるベトナムのオフショアを増員（ブリッジ SE2 名、エンジニア 9 名、テスター 2 名）。日本人を業務委託や SES で雇うではなくオフショアにした理由は、コストが安いからである。（日本人: 約 120 万円/人月、オフショア: 約 45 万円/人月）

私の役割は、ブリッジ SE とのコミュニケーション窓口、その他不具合チケットを減らすための各種ボトルネック解消など。

#### 取り組み結果

結論からいうと、「解消数は目標を下回った。オフショア開発をやめて日本人の採用を行う計画を練り直しているところ」である。

増員したオフショアによる改修はどんどん進んだが、納品後の日本側でのコードレビューで停滞が始まった。ヒヤリングの結果、停滞原因は主に「オフショアの納品するコード品質が低い」ことが理由だと分かった。

具体的には、PR レビューでの指摘に対しても適切な修正が行われない・なぜその修正を行なったのか？が分からず Approve できない・そこで発生するやりとりのコミュニケーションコストが大きいことがなど挙げられた。

そこで、品質面の課題解決のため、週次で WEB・iOS・Android の各テックリードとブリッジ SE を招集してフィードバック MT を開催することにした。コード品質向上のため、現地でのレビューを導入し Github で Appeove したものを納品するように依頼。コミュニケーションコストを下げるため、コミットコメントの書き方を指導・納品時に「バグの原因・修正方針・影響範囲・エビデンスの画像/動画」を併せて提出するよう依頼。3 ヶ月ほどかけて前述の依頼内容について細かくフィードバックを行ってきた。

しかし、依頼内容を実施し少しずつ状況が改善されてはきたがやはりコミュニケーションコストが大きく、レビュー停滞が解消できるほどの改善効果は得られなかった。オフショアへの委託は、人月単価自体は安いが、コミュニケーションコストを考慮したトータルのコストパフォーマンスでいうとマイナスが大きいと判断。

さらに今後長期で見たときに、「今の不具合発生数ありきで解消するための人数を確保するのではなく、本気で発生数を抑えにいくべき」と提言し、別で進めているアジャイル開発への移行とともに不具合解消もアジャイルチーム内で行なっていくよう意思決定をした。チーム内で不具合発生数を測定し、観測することで長期的に発生を抑えにいく。

オフショアへの委託は結果として「安物買いの銭失い」となってしまったことは勉強代としては大きすぎるが、この失敗を今後の組織運営に生かしていきたい。

## 業務内容② 不具合調査

CS からの技術的な問い合わせには、自ら手を動かし調査を行う。バックエンドは Laravel(v5.2)、フロントエンドは backbone.js・Vue.js・Nuxt.js・TypeScript、インフラには AWS を使用している。書類出力・描画周りでは一部外部サービスの API を利用している。外部サービス連携を含むインフラ〜フロントエンドまで横断的に調査を行う。

AWS は、以下のような構成

- ElasticBeanstalk を用いたブルーグリーンデプロイ
- Lambda・CloudWatch を用いた外部サービス連携のバッチ処理
- Worker 環境を用いたアップサーバーとの処理の分離

### 不具合対応の内容
- Vue.jsで実装されたフロントエンド不具合の改修
- Laravelで実装されたバックエンド不具合の改修
  - PHPDebugを用いたデバッグ
  - 開発環境から本番DBへつなぎ、環境起因原因の特定
  - CloudWatchでのLaravelログ・Lambdaログの確認
  - AthenaでのALBアクセスログ確認
  - RDSのスナップショット復元
  - ALB, ECS, Elasticbeanstalk など各サービスのステータス確認
-  実装者が退職済み・現メンバーが誰も分からない APIGateway x SQS で実装されたサーバレス環境の不具合
  - クラスメソッドサポートへ問い合わせながら、原因究明
- 外部サービス連携部分は、原因切り分け後、先方担当者と共に解決策を模索

### 不具合改修において工夫したこと

#### ALBのアクセスログをAthenaで分析できるようにし、不具合調査効率向上

モバイルアプリ側の不具合調査の際、サーバー側との同期関連の不具合だと「同期が走ったのか否か」が一次切り分けとして非常に大事であるが、DBでの操作ログだけだとそれが分からず調査がしづらいという課題があった。そこで、ALBで取得しているアクセスログ（日時・クエリパラメータ付きURL・ステータスコード）をAthenaで分析できる環境を用意し、「同期が走ったか」の確認ができるように。モバイル側の調査効率が悪いという課題を解決できた。

## 業務内容③ 不具合改修のPM

CREチーム4名、およびオフショア9名が行う全不具合改修案件のプロジェクトマネージャーを担当。常にチケットが10〜20動いているような状態で、日々これらの確認に多くの時間を割いている。

### 不具合改修のPMとして工夫したこと

#### BacklogAPIを使った課題集計システムを開発し、業務工数削減

週次・月次で解消状況をまとめて報告する際、毎度Backlog上で課題検索で絞り込みを行い、集計を行なっていた。週に2度 **1**時間、月に1度 **2**時間かかっていた作業をTypeScriptで自動化し、計**4**時間/月 の工数削減に成功。

# 【成果・得られたスキル】

## コミュニケーションが活発な生産性の高いチームビルディングを行うことができる

チーム生産性を高めるため、コミュニケーションが活発なチームビルディングを重視している。「生産性の高いチーム」 = 「行き交う情報量の多いチーム」であると考えている。

コロナ以降働き方がフルリモートになった現職では、『[Gather](gather.town)』を用いて、オフィス出社時代の「ちょっとイイですか？」ができる空間を作ったり、定例内で議論が活発になるアジェンダを用意するなどし、リーダー対各メンバーの「1 対 n」ではなく、メンバー同士の「n 対 n」のコミュニケーションがとれる環境作りを行っている。

また「褒めるフィードバック」を行うことで、メンバーの自己肯定感・向上心が高まり、そのエネルギーがチームに還元され、他のメンバーへも良い影響を与えるというサイクルを生み出すことができている。

コミュニケーションが活発な、「生産性高いチーム」を作ることが得意。

## リーダーシップ

食品メーカーで約 3 年のリーダー経験があり、現職でも入社 1 ヶ月で CRE チームリーダーを、6 ヶ月目には兼任で新規開発の WEB チームリーダーも任されている。プライベートでも 10 人ほどのプログラミング学習コミュニティを立ち上げ日々活動を行うなど、チームで仕事をするのが好きであり、得意領域でもある。

チームとしての成果が最大になる為の施策を考え、粘り強く実行していくことが得意。現職でも、入社直後から開発組織最大の課題であった「不具合件数を減らすこと」に対して綿密な計画立案・オフショアのマネジメント含めたプロジェクト進捗管理を徹底的に行い、2021 年度上期の「全社（社員 60 名弱）で最も業績貢献した人」として MVP 賞を受賞。

# 【学び】

## ベテランエンジニアのマネジメントの難しさ

EM としてエンジニア組織のマネジメントを行うのは初めてですが、「チーム内外の関係各所に協力を仰ながら、目の前の課題にチームとして取り組む」という点は後述の食品工場時代のマネジメントと同じであり、その経験が生きています。
しかし、自身のエンジニア経験が 2 年程度であり、自分よりはるかに知識豊富なエンジニアの方々の中心に立つという難しさに直面しました。会社・チームとしてやりたいことをリーダーとして推進していくために、まずは信頼してもらう必要があります。
その中で特に意識したことは、「『自分にできること』と『自分ができないこと』を明確にする」です。具体的には、以下のような棲み分けです。

- できないこと

  - 技術的なサポート

- できること
  - 即レス
  - 関係各署との調整
  - 誰でもできるが、時間がかかるもの（不具合再現など）
  - 誰よりも熱量を持って、真摯に取り組む
  - 技術のキャッチアップ

技術・プロダクト・組織作りといった多くの職務領域を完全にカバーすることはできません。できない部分は人に任せ、できる部分にフォーカスして動く方が、結果として全体のパフォーマンスは上がり、信頼も得られるだろうと考えました。前職での大手企業での経験から、関係者を巻き込み調整しながら業務を進めることは割と得意領域だったりするので、まずはそこで自分のバリューを発揮しようと心に決めました。

あとは、「熱意」の部分も非常に重要で、リーダーの熱量がそのままチームの熱量になると思っています。即レスするだけでも相手へ熱量を伝えることができます。

また、今はできないこととしている技術面についても、「キャッチアップしている姿」も見せることが非常に大切だと思い、メンバー同志のモブプロに参加したり、積極的に Slack で技術的な質問を投下するなどしています。

これを意識してやった結果、最初は私に相談することなど皆無だったメンバーからも半年経った頃には毎日相談を受けすぎて手が回らないくらいには信頼してもらえるようになりました。前述の MVP 受賞理由も、こういった姿勢が評価していただけたようです。

## 「リソース効率」より「フロー効率」

前述のオフショアを使った不具合解消の取り組みで、「リソース効率」よりも「フロー効率」を重視した方がアウトプット量は多くなる、ということを、失敗を通じて学ぶことができました。

『【業務内容】> 代表的な取り組み』で述べたように、レビュー工程で停滞してしまったのはオフショアの品質が低いことが主な原因でした。実は失敗はそれだけでなくもう一つありました。

オフショアへは、「レビューは日本側でさばくので、どんどん新規チケットを対応してガンガン納品してほしい」と伝えており、追う KPI も納品数を設定していました。

しかし、「チケットがレビュー工程で停滞する → 監視対象のチケットが増える → ハンドリングが煩雑になり、質問や指摘コメントへのレスポンスが遅くなる → さらに停滞する」ということを経験しました。その頃ちょうど[ネットで見た記事](https://www.slideshare.net/i2key/xpjug)で「リソース効率」と「フロー効率」という言葉を知り、自分がやっていたのは完全に「リソース効率」重視のハンドリングであったことを認識しました。

そこからフロー効率重視のハンドリングへ切り替え、KPI も「納品数」ではなく「レビュー通過数」へ設定し直し、現在取り組み中です。

## 変数が多い場合は、究極にシンプルに考える

前述のオフショアによる不具合解消の取り組みで、オフショアエンジニアが何人必要かを算出するために「一人あたり月何件解消できるか」という能率を設定する必要がありました。

最初は、過去の Backlog チケットのデータから「解消した件数」「修正規模」「修正難易度」など、「考慮できうる全ての要素」を反映させた完全な数値を出そうとスタートしました。

しかし、変数が多すぎるとどんな計算式を使っても納得感が出ず、どうすれば良いか分からず堂々巡りになってしまいました。

そこで、代表に相談したところ「シンプルに実績の平均で出せば良いじゃん？月によって大きくバラツきがあるのも、それが実態ということだから慣らしちゃえばそれっぽい数字になるよ」と言われました。

最終的に、一人あたり解消数 5 件/月で計算してオフショアの人数を決めましたが、半年ほど運用して非常に精度の高い（頑張ればぎりぎり到達できそうな）数値になっていました。

「変数が多すぎる場合は究極ににシンプルに考えるとよい」という教訓を得ました。

## チームの雰囲気は一人一人の総和だが、変えるキッカケは一人でも生み出せる

私のチームは、6 人のメンバーで構成されています。メンバーの中で 1 名、あまり積極的に発言することはなく、笑った姿を見せることも少ないおとなしい女性のメンバーがいました。

それがある日を境に、チームミーティングでもがんがん発言するようになり、これまでのポーカーフェイスが嘘のように豊かな表情を見せるようになりました（後から本人に聞いて分かったことですが、プライベートで大きなプラスの心境の変化があり、それが仕事へも良い影響を与えていたようです）。

彼女の大きな変化が、チームに大きな変化をもたらしました。フルリモートでなかなか分かりづらいにもかかわらず、明らかにチームの雰囲気が明るくなり、チーム内の会話量が増えました。

この一連の出来事は完全に偶然でしたが、リーダーとしてチーム運営する上で非常に学びとなる出来事でした。
